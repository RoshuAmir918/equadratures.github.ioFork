<!DOCTYPE tml>
<meta charset="utf-8"/><meta content="width=device-width,initial-scale=1.0" name="viewport"/><title>Notebook</title><style>pre{line-height:125%}td.linenos .normal{color:inherit;background:transparent;padding-left:5px;padding-right:5px}span.linenos{color:inherit;background:transparent;padding-left:5px;padding-right:5px}td.linenos .special{color:#000;background:#ffffc0;padding-left:5px;padding-right:5px}span.linenos.special{color:#000;background:#ffffc0;padding-left:5px;padding-right:5px}.highlight .hll{background:var(--jp-cell-editor-active-background)}.highlight{background:var(--jp-cell-editor-background);color:var(--jp-mirror-editor-variable-color)}.highlight .c{color:var(--jp-mirror-editor-comment-color);font-style:italic}.highlight .err{color:var(--jp-mirror-editor-error-color)}.highlight .k{color:var(--jp-mirror-editor-keyword-color);font-weight:bold}.highlight .o{color:var(--jp-mirror-editor-operator-color);font-weight:bold}.highlight .p{color:var(--jp-mirror-editor-punctuation-color)}.highlight .ch{color:var(--jp-mirror-editor-comment-color);font-style:italic}.highlight .cm{color:var(--jp-mirror-editor-comment-color);font-style:italic}.highlight .cp{color:var(--jp-mirror-editor-comment-color);font-style:italic}.highlight .cpf{color:var(--jp-mirror-editor-comment-color);font-style:italic}.highlight .c1{color:var(--jp-mirror-editor-comment-color);font-style:italic}.highlight .cs{color:var(--jp-mirror-editor-comment-color);font-style:italic}.highlight .kc{color:var(--jp-mirror-editor-keyword-color);font-weight:bold}.highlight .kd{color:var(--jp-mirror-editor-keyword-color);font-weight:bold}.highlight .kn{color:var(--jp-mirror-editor-keyword-color);font-weight:bold}.highlight .kp{color:var(--jp-mirror-editor-keyword-color);font-weight:bold}.highlight .kr{color:var(--jp-mirror-editor-keyword-color);font-weight:bold}.highlight .kt{color:var(--jp-mirror-editor-keyword-color);font-weight:bold}.highlight .m{color:var(--jp-mirror-editor-number-color)}.highlight .s{color:var(--jp-mirror-editor-string-color)}.highlight .ow{color:var(--jp-mirror-editor-operator-color);font-weight:bold}.highlight .w{color:var(--jp-mirror-editor-variable-color)}.highlight .mb{color:var(--jp-mirror-editor-number-color)}.highlight .mf{color:var(--jp-mirror-editor-number-color)}.highlight .mh{color:var(--jp-mirror-editor-number-color)}.highlight .mi{color:var(--jp-mirror-editor-number-color)}.highlight .mo{color:var(--jp-mirror-editor-number-color)}.highlight .sa{color:var(--jp-mirror-editor-string-color)}.highlight .sb{color:var(--jp-mirror-editor-string-color)}.highlight .sc{color:var(--jp-mirror-editor-string-color)}.highlight .dl{color:var(--jp-mirror-editor-string-color)}.highlight .sd{color:var(--jp-mirror-editor-string-color)}.highlight .s2{color:var(--jp-mirror-editor-string-color)}.highlight .se{color:var(--jp-mirror-editor-string-color)}.highlight .sh{color:var(--jp-mirror-editor-string-color)}.highlight .si{color:var(--jp-mirror-editor-string-color)}.highlight .sx{color:var(--jp-mirror-editor-string-color)}.highlight .sr{color:var(--jp-mirror-editor-string-color)}.highlight .s1{color:var(--jp-mirror-editor-string-color)}.highlight .ss{color:var(--jp-mirror-editor-string-color)}.highlight .il{color:var(--jp-mirror-editor-number-color)}</style><link href="/modals/notebooks/templates/lab_custom/static/index.css" rel="stylesheet"/><link href="/modals/notebooks/templates/lab_custom/static/misc.css" rel="stylesheet"/><body class="jp-Notebook" data-jp-theme-light="true" data-jp-theme-name="JupyterLab Light"><div class="jp-Cell jp-MarkdownCell jp-Notebook-cell"><div class="jp-Cell-inputWrapper"><div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser"></div><div class="jp-InputArea jp-Cell-inputArea"><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown"><h2 id="Active-subspaces">Active subspaces<a class="anchor-link" href="#Active-subspaces">Â¶</a></h2><p>Active subspaces represent a powerful set of ideas for output-based data-driven dimension reduction.</p></div></div></div></div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs"><div class="jp-Cell-inputWrapper"><div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser"></div><div class="jp-InputArea jp-Cell-inputArea"><div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline"><div class="CodeMirror cm-s-jupyter"><div class="highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">equadratures</span> <span class="k">as</span> <span class="nn">eq</span>
</pre></div></div></div></div></div></div><div class="jp-Cell jp-CodeCell jp-Notebook-cell"><div class="jp-Cell-inputWrapper"><div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser"></div><div class="jp-InputArea jp-Cell-inputArea"><div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline"><div class="CodeMirror cm-s-jupyter"><div class="highlight hl-ipython3"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">load_eq_dataset</span><span class="p">(</span><span class="s1">'3Dfan_blades'</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># Download the data</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">'X_a'</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">'y1_a'</span><span class="p">]</span>

<span class="c1"># Active subspace computation</span>
<span class="n">sub</span> <span class="o">=</span> <span class="n">eq</span><span class="o">.</span><span class="n">Subspaces</span><span class="p">(</span><span class="n">sample_points</span><span class="o">=</span><span class="n">X</span><span class="p">,</span> <span class="n">sample_outputs</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> \
                   <span class="n">method</span><span class="o">=</span><span class="s1">'active-subspaces'</span><span class="p">)</span>
<span class="n">W</span> <span class="o">=</span> <span class="n">sub</span><span class="o">.</span><span class="n">get_subspace</span><span class="p">()</span>
</pre></div></div></div></div></div><div class="jp-Cell-outputWrapper"><div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser"></div><div class="jp-OutputArea jp-Cell-outputArea"><div class="jp-OutputArea-child"><div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain"><pre>Downloading the 3Dfan_blades dataset from github...
</pre></div></div></div></div></div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs"><div class="jp-Cell-inputWrapper"><div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser"></div><div class="jp-InputArea jp-Cell-inputArea"><div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline"><div class="CodeMirror cm-s-jupyter"><div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Plotting </span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'Eigenvalues (log)'</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">sub</span><span class="o">.</span><span class="n">get_eigenvalues</span><span class="p">()))</span> <span class="p">,</span> 
                   <span class="s1">'Parameter #'</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])})</span>
<span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'Active-1'</span><span class="p">:</span> <span class="n">X</span> <span class="o">@</span> <span class="n">W</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> 
                    <span class="s1">'Active-2'</span><span class="p">:</span> <span class="n">X</span> <span class="o">@</span> <span class="n">W</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span> 
                    <span class="s1">'Efficiency'</span><span class="p">:</span> <span class="n">y</span><span class="p">})</span>
</pre></div></div></div></div></div></div><div class="jp-Cell jp-CodeCell jp-Notebook-cell"><div class="jp-Cell-inputWrapper"><div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser"></div><div class="jp-InputArea jp-Cell-inputArea"><div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline"><div class="CodeMirror cm-s-jupyter"><div class="highlight hl-ipython3"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">"Parameter #"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"Eigenvalues (log)"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"Eigenvalues (log)"</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">margin</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div></div></div></div></div><div class="jp-Cell-outputWrapper"><div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser"></div><div class="jp-OutputArea jp-Cell-outputArea"><div class="jp-OutputArea-child"><div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html"><iframe allowfullscreen="" frameborder="0" height="545px" scrolling="no" src="active_subspace/figure_5.html" width="100%"></iframe></div></div></div></div></div><div class="jp-Cell jp-CodeCell jp-Notebook-cell"><div class="jp-Cell-inputWrapper"><div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser"></div><div class="jp-InputArea jp-Cell-inputArea"><div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline"><div class="CodeMirror cm-s-jupyter"><div class="highlight hl-ipython3"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">scatter_3d</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">'Active-1'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">'Active-2'</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s1">'Efficiency'</span><span class="p">,</span>
                    <span class="n">color</span><span class="o">=</span><span class="s1">'Efficiency'</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">margin</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div></div></div></div></div><div class="jp-Cell-outputWrapper"><div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser"></div><div class="jp-OutputArea jp-Cell-outputArea"><div class="jp-OutputArea-child"><div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html"><iframe allowfullscreen="" frameborder="0" height="545px" scrolling="no" src="active_subspace/figure_6.html" width="100%"></iframe></div></div></div></div></div></body>